{% extends 'base.html' %}
{% block title %}Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯{% endblock %}

{% block content %}
<h2 class="mb-4">ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</h2>

<div id="cart-items" class="mb-3"></div>
<div id="total-price" class="fw-bold mb-3"></div>
<a href="{{ url_for('main.checkout') }}" class="btn btn-primary mt-3">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª</a>
<script>
function loadCart() {
    fetch('/api/cart')
        .then(res => res.json())
        .then(data => {
            const itemsDiv = document.getElementById('cart-items');
            const totalDiv = document.getElementById('total-price');

            if (data.cart.length === 0) {
                itemsDiv.innerHTML = '<p>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>';
                totalDiv.innerHTML = '';
                return;
            }

            let html = '<table class="table table-bordered"><thead><tr><th>Ù…Ø­ØµÙˆÙ„</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</th><th>Ø¬Ù…Ø¹</th></tr></thead><tbody>';
            data.cart.forEach(item => {
                const subtotal = item.price * item.quantity;
                html += `<tr>
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>${item.price} ØªÙˆÙ…Ø§Ù†</td>
                    <td>${subtotal} ØªÙˆÙ…Ø§Ù†</td>
                </tr>`;
            });
            html += '</tbody></table>';
            itemsDiv.innerHTML = html;

            totalDiv.textContent = `ğŸ’° Ù…Ø¨Ù„Øº Ú©Ù„: ${data.total} ØªÙˆÙ…Ø§Ù†`;
        });
}

window.onload = loadCart;
</script>
{% endblock %}



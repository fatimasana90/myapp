<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù¾Ø±Ø¯Ø§Ø®Øª | Ø¨Ø±Ø¢Ù„ÛŒÙ†</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font/dist/font-face.css" rel="stylesheet" />
  <style>
    body {
      font-family: Vazir, sans-serif;
      background-color: #f8f9fa;
    }
    header {
      background-color: #343a40;
      color: #fff;
      padding: 1rem;
      text-align: center;
    }
  </style>
</head>
<body>

<header>ğŸ’³ ØµÙØ­Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª</header>

<div class="container mt-3 pb-5">
  <form id="checkout-form">
    <div class="mb-3">
      <label for="name" class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
      <input type="text" class="form-control" id="name" required />
    </div>

    <div class="mb-3">
      <label for="phone" class="form-label">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
      <input type="tel" class="form-control" id="phone" name="phone" required pattern="09[0-9]{9}" placeholder="Ù…Ø«Ù„Ø§Ù‹ 09123456789" />
    </div>

    <div class="mb-3">
      <label for="address" class="form-label">Ø¢Ø¯Ø±Ø³ ØªØ­ÙˆÛŒÙ„ Ø³ÙØ§Ø±Ø´</label>
      <textarea class="form-control" id="address" rows="3" required></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª</label>
      <select class="form-select" id="payment-method" required>
        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
        <option value="online">Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†</option>
        <option value="cash">Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ Ø¯Ø± Ù…Ø­Ù„</option>
      </select>
    </div>

    <button type="submit" class="btn btn-success w-100">ØªØ§ÛŒÛŒØ¯ Ùˆ Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button>
  </form>
</div>

<footer class="fixed-bottom bg-white border-top py-2 shadow-sm">
  <div class="container d-flex justify-content-around">
    <a href="{{ url_for('main.mobile_home') }}" class="text-decoration-none text-center text-dark flex-fill">
      <i class="bi bi-house-door-fill fs-4"></i><br /><small>Ø®Ø§Ù†Ù‡</small>
    </a>
    <a href="{{ url_for('main.mobile_cart') }}" class="text-decoration-none text-center text-dark flex-fill">
      <i class="bi bi-cart-fill fs-4"></i><br /><small>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</small>
    </a>
    <a href="{{ url_for('main.mobile_checkout') }}" class="text-decoration-none text-center text-dark flex-fill">
      <i class="bi bi-credit-card-2-front-fill fs-4"></i><br /><small>Ù¾Ø±Ø¯Ø§Ø®Øª</small>
    </a>
    <a href="{{ url_for('main.mobile_profile') }}" class="text-decoration-none text-center text-dark flex-fill">
      <i class="bi bi-person-fill fs-4"></i><br /><small>Ù¾Ø±ÙˆÙØ§ÛŒÙ„</small>
    </a>
  </div>
</footer>

<script>
  document.getElementById("checkout-form").addEventListener("submit", function(e) {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const address = document.getElementById("address").value.trim();
    const paymentMethod = document.getElementById("payment-method").value;

    if (!name || !phone || !address || !paymentMethod) {
      alert("Ù„Ø·ÙØ§ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯.");
      return;
    }

    // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÙØ§Ø±Ø´ Ø§Ø² localStorage
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    if (cart.length === 0) {
      alert("Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.");
      return;
    }

    // Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ø§ÛŒÙ†Ø¬Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø±Ø³Ø§Ù„ Ø³ÙØ§Ø±Ø´ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
    // Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÙÙ‚Ø· ÛŒÚ© Ù¾ÛŒØ§Ù… ØªØ§ÛŒÛŒØ¯ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯ÛŒÙ…

    alert("Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯. Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§!");

    // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ù¾Ø³ Ø§Ø² Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´
    localStorage.removeItem("cart");

    // Ø±ÛŒØ¯Ø§ÛŒØ±Ú©Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø®Ø§Ù†Ù‡ ÛŒØ§ ØµÙØ­Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
    window.location.href = "{{ url_for('main.mobile_home') }}";
  });
</script>

</body>
</html>

